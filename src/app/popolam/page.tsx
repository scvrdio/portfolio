import { CaseTopBar } from "@/components/case/CaseTopBar";
import { CaseHero } from "@/components/case/CaseHero";
import { MetricPills } from "@/components/ui/MetricPills";
import { Section } from "@/components/ui/Section";
import { TextBlock } from "@/components/ui/TextBlock";
import { MediaBlock } from "@/components/ui/MediaBlock";

export default function Page() {
  return (
    <div className="space-y-10">
      <CaseTopBar title="Попoлам" figmaHref="#" />
      <CaseHero src="/projects/popolam-hero.png" />

      <article className="space-y-12">
        {/* ВВЕДЕНИЕ */}
        <Section title="Введение">
          <TextBlock accent="Описание">
            Приложение для быстрого деления чеков между людьми с использованием компьютерного зрения и ML-алгоритмов.
            Все траты собираются в одном месте, позиции можно быстро распределить между участниками, а оплату провести
            одной кнопкой.
          </TextBlock>

          <TextBlock accent="Цель">
            Упростить и ускорить процесс деления общих чеков и переводов между людьми, снизить количество ошибок и
            пропущенных оплат.
          </TextBlock>

          <TextBlock accent="Проблема">
            Совместные траты сложно делить вручную: это долго, ведёт к ошибкам и пропущенным оплатам, особенно в поездках
            и при большом количестве чеков.
          </TextBlock>
        </Section>

        {/* ПЕРВАЯ ВЕРСИЯ */}
        <Section title="Первая версия">
          <TextBlock accent="Задача">
            Реализовать сценарии: создание чека, добавление участников, распределение позиций, генерация и отправка
            ссылки на оплату. Проверить востребованность и собрать поведенческие данные для следующих итераций.
          </TextBlock>

          <TextBlock accent="Решение">
            Провел серию интервью, оформил Lean Canvas, применил КАНО-анализ для приоритезации функциональности. На основе полученных инсайтов спроектировал интерфейс сценариев создания чека и подключения СБП, провел юзабилити-тестирование и настроил сбор аналитики.
            <span className="pbreak" />В первую очередь создал флоу логина. В нем пользователь регистрируется с помощью номера телефона с использованием кода подтверждения, и, если аккаунт новый, то вписывает свое имя и выбирает аватарку/эмодзи. Также в дальнейшем добавил CTA на подключение СБП в последнем шаге.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/login.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock>
            Затем создал главную страницу, на которой всегда отображается номер телефона и CTA на подключение СБП или банк СБП, если он уже подключен. Главная состоит из трех табов: События, Чеки и Бронирование.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/main-page.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock>
            Разработал флоу подключения СБП со всеми корнер-кейсами: номер не подключен к СБП, изменение номера, рандомная ошибка. Флоу состоит из выбора номера телефона, поиска и выбора банка и подтверждения подключения.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/sbp.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock>
            Затем разработал флоу создания чека. При добавлении участников появляется шторка с пользователями, которые уже участвовали в разделении, а также с возможностью пригласить пользователей по ссылке или QR-коду.
            <span className="pbreak" />Флоу деления имеет два варианта: вручную и автоматически. В первом случае пользователь сам вводит сумму чека и добавляет участников, прописывая каждому его долг.
            <span className="pbreak" />При автоматическом делении пользователь добавляет других участников, указывает сумму чаевых и прикрепляет фотографию чека, которая автоматически сканируется, перенося все позиции после создания чека.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/create-receipt.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock>
            Флоу распределения чека. Здесь создатель может отредактировать позиции вручную, выбрать свои, а также прикрепить остальных участников к их позициям. При рассчете чека появляется шторка с подтверждением операции и коллаутом-предупреждением, если не все позиции распределены.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/check.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock>
            Остальные участники присоединяются к делению при необходимости. Они так же выбирают позиции и сохраняют выбор. После рассчета им приходит счет, который они могут оспорить или оплатить.
          </TextBlock>

          <TextBlock accent="Результат">
            Выкатили приложение на небольшую базу пользователей (до 1000 человек). Пользователи отмечали скорость и простоту флоу.
            <span className="pbreak" />После релиза понял, что необходимо повысить конверсию в оплату по СБП, дать возможность отмечать позиции без регистрации — часто платил один человек, а остальные не хотели создавать аккаунт. Также продумать групповые сценарии — в поездках и на вечеринках неудобно делить каждый чек отдельно.
          </TextBlock>

          <MetricPills
            items={[
              { label: "ВРЕМЯ ДЕЛЕНИЯ", value: "5 мин → 40 сек" },
              { label: "RR30", value: "35%" },
              { label: "CR", value: "21%" },
              { label: "AVG ЧЕКОВ НА ЮЗЕРА", value: "3.4 / мес" },
            ]}
          />
        </Section>

        {/* ВТОРАЯ ВЕРСИЯ */}
        <Section title="Вторая версия">
          <TextBlock accent="Задача">
            Добавить «События», где объединяются все чеки и система автоматически рассчитывает итоговые долги между участниками, избавляя от необходимости оплачивать чеки по-отдельности. Добавить возможность участия без регистрации и CTA на регистрацию и подключение СБП.
          </TextBlock>

          <TextBlock accent="Решение">
            В первую очередь добавил больше CTA на подключение СБП: при логине, на главный экран и после каждого создания чека.
            <span className="pbreak" />Создал гостевой сценарий. В нем пользователь переходит по QR-коду и попадает в веб-версию приложения. Здесь отображается информация о чеке и предлагается вписать свое имя, присоединиться к делению и, по желанию, скачать приложение.
            <span className="pbreak" />В остальном флоу выглядит как обычно.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/guest.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock>
            Затем реализовал расчет долгов между участниками с оптимизацией переводов. При создании события пользователь добавляет других участников и дает название событию. На главном экране события отображаются участники и их долги, а также все операции.
            <span className="pbreak" />Флоу создания чека идентичный, за исключением того, что пользователю не нужно оплачивать этот чек отдельно, а оплатить только общий долг другому пользователю, который суммируется из всех транзакций между участниками.
          </TextBlock>

          <MediaBlock
            items={[
              {
                type: "video",
                src: "/cases/popolam/collab.mp4",
                aspectClassName: "aspect-[9/16]",
                autoPlay: true,
                loop: true,
                muted: true,
                controls: false,
              },
            ]}
          />

          <TextBlock accent="Результат">
            Изменения повысили активацию пользователей и увеличили CR в регистрацию и оплату по СБП.
          </TextBlock>

          <MetricPills
            items={[
              { label: "CR в СБП", value: "64%" },
              { label: "RR30", value: "57%" },
              { label: "MAU", value: "+38%" },
              { label: "AVG ЧЕКОВ НА ЮЗЕРА", value: "5.1 / мес" },
            ]}
          />

        </Section>

        {/* ВТОРАЯ ВЕРСИЯ */}
        <Section title="Вывод">
          <TextBlock>
            После релиза второй версии продукт показал устойчивый рост и положительный пользовательский отклик. Целевой сценарий — быстрое разделение чеков в группах — подтвердил востребованность.
            <span className="pbreak" />Я поддерживал проект после запуска, отслеживал метрики, анализировал сценарии использования и улучшал UX: повысил дискаверабилити интерфейса, добавил микрокопирайтинг для пояснения логики расчетов, упростил добавление участников через QR, добавил подсказки по оплате и отображение статусов переводов.
            <span className="pbreak" />Продукт удерживал стабильную конверсию в оплату по СБП выше 60% и высокий NPS.
          </TextBlock>
        </Section>

      </article>
    </div>
  );
}
